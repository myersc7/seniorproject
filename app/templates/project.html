{% extends "base.html" %}
{% block content %}
<body>

<h1>{{ get_proj_name(project_id) }}</h1>
<p id="summary">Project Summary</p>
<div class="center">
    <button href="#" class="popup-modal"
                    data-toggle="modal" data-target="#DoD">Definition of Done</button>
</div>

    <!-- Creates two columns with Project management buttons and burnup chart -->
    <div class="container">
        <div class="row">
            <div class="col">
                <!-- Project Management Buttons -->
                <a href="/sprint_manage/{{ project_id }}" class="button project-page-button hvr-shrink">Sprint Management</a>
                <a href="/sprint/{{currentSprint(project_id)}}" class="button project-page-button hvr-shrink">Current Sprint</a>
                <a href="https://www.github.com/mcninsanity/RowanAgility" class="button github-page-button hvr-shrink">Project Github<a href="#" class="button edit-githublink-button hvr-shrink">Edit Link</a>
</a>
                <a href="#" class="button edit-githublink-button hvr-shrink">Edit Link</a>
                <a href="/team/{{ project_id }}" class="button project-page-button hvr-shrink">Team Page</a>
            </div>
            <div class="col-8">
                <!-- Burnup Chart -->
                <div id="burnup" style="width:100%;"></div>
            </div>
        </div>
    </div>

<!-- Definition of Done Modal -->
<div class="modal fade" id="DoD" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="DoD title">Definition of Done</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
        <form method='post' class="form-horizontal" >
            {{ form.hidden_tag() }}
            <p>{{ form.Dod(size=400) }}</p>
            <p>{{ form.submit() }}</p>
           </form>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

{#

<script src="../static/js/jquery-3.3.1.js"></script>
<script src="../static/js/popper.js"></script>
<script src="../static/js/bootstrap.bundle.min.js"></script>

#}

<!-- Creates Burnup Chart -->
<script>
var sprints = {{ sprints }}
var totalDiff = {{ totalDiff }}
var completeDiff = {{ completeDiff }}
var trace0 = {
  x: sprints,
  y: totalDiff,
  type: 'lines',
  name: 'Total Difficulty'
};
var trace1 = {
  x: sprints,
  y: completeDiff,
  type: 'lines',
  name: 'Completed Difficulty'
};
var layout = {
  title: 'Burn-Up Chart for Project',
  xaxis: {
    title: 'Sprint',
    showgrid: false,
  },
  yaxis: {
    title: 'Difficulty (points)',
    showline: false
  }
};
var data = [trace0, trace1];
Plotly.newPlot('burnup', data, layout);
</script>

</body>
{% endblock %}
